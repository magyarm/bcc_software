/dts-v1/;
/plugin/;

/*
 * Pin assignments
 *
 * LCD               Connector
 * 
 * 2 SPI CLK  <--   P9.22 SPI0_CLK
 * 3 SPI MOSI <--   P9.18 SPI0_D1
 * 4 SPI MISO <--   P9.21 SPI0_D0
 * 5 SPI CS   <--   P9.17 SP0_CS0
 *
 */

/ {
    compatible = "ti,beaglebone", "ti,beaglebone-black";

    /* identification */
    part-number = "BB-BONE-BCC";

    /* version */
    version = "00A0";

    /* state the resources this cape uses */
    exclusive-use =
        /* SPI pins used */
        "P9.22",	    /* SPI0: spi0_sclk */
        "P9.18",	    /* SPI0: spi0_d1 */
        "P9.17",	    /* SPI0: spi0_cs0 */
        "P9.21",	    /* SPI0: spi0_d0 */
        /* GPMC Clock*/
        "P9.18",        /* GPMC: gpmc_clk */
        /* GPMC Address/Data pins used */
        "P9.25",        /* GPMC: gpmc_ad0 */
        "P9.24",        /* GPMC: gpmc_ad1 */
        "P9.5",         /* GPMC: gpmc_ad2 */
        "P9.6",         /* GPMC: gpmc_ad3 */
        "P9.23",        /* GPMC: gpmc_ad4 */
        "P9.22",        /* GPMC: gpmc_ad5 */
        "P9.3",         /* GPMC: gpmc_ad6 */
        "P9.4",         /* GPMC: gpmc_ad7 */
        "P9.19",        /* GPMC: gpmc_ad8 */
        "P9.13",        /* GPMC: gpmc_ad9 */
        "P9.14",        /* GPMC: gpmc_ad10 */
        "P9.17",        /* GPMC: gpmc_ad11 */
        "P9.12",        /* GPMC: gpmc_ad12 */
        "P9.11",        /* GPMC: gpmc_ad13 */
        "P9.16",        /* GPMC: gpmc_ad14 */
        "P9.15",        /* GPMC: gpmc_ad15*/
        /* GPMC Control Lines */
        "P8.12",        /* GPMC: gpmc_be1n */\
        "P9.7",         /* GPMC: gpmc_advn_ale */
        "P9.8",         /* GPMC: gpmc_oen_ren */
        "P9.10",        /* GPMC: gpmc_wen */
        "P9.9",         /* GPMC: gpmc_be0n_cle */
        "P9.12",        /* GPMC: gpmc_be1n */
        /* GPMC Chip Selects */
        "P9.26",        /* GPMC: gpmc_csn0 */
        "P9.21",        /* GPMC: gpmc_csn1 */
        "P9.20",        /* GPMC: gpmc_csn2 */
        /* Hardware IP uses */
        "GPMC",
        "SPI0";

    fragment@0 {
        target = <&am33xx_pinmux>;
        __overlay__ {
            pinctrl_spi0: pinctrl_spi0_pins {
                pinctrl-single,pins = <                                        
                    0x150 0x30    /* P9_22 = mcasp0_aclkx.spi0_sclk                 , OUTPUT_PULLUP | MODE0 */
                    0x154 0x30    /* P9_21 = mcasp0_fsx.spi0_d0                     , INPUT_PULLUP | MODE0 */
                    0x158 0x10    /* P9_18 = mcasp0_axr0.spi0_d1                    , OUTPUT_PULLUP | MODE0 */
                    0x15C 0x10    /* P9_17 = mcasp0_ahclkr.spi0_cs0                 , OUTPUT_PULLUP | MODE0 */                    
                >;
            };
        };
    };

    fragment@1 {
        target = <&spi0>;
        __overlay__ {
            #address-cells     = <1>;
            #size-cells     = <0>;
            status            = "okay";
            pinctrl-names    = "default";
            pinctrl-0        = <&pinctrl_spi0>;    
           /* cs-gpios         = <&gpio4 17 0>; /*&I2C1_SCL instead?*/

            spi0_0{
                #address-cells       = <1>;
                #size-cells       = <0>;
                compatible           = "linux,spidev";
                reg               = <0>;
                spi-max-frequency = <16000000>;
                spi-cpha;          
            };
            spi0_1{
                #address-cells       = <1>;
                #size-cells       = <0>;
                compatible           = "linux,spidev";
                reg               = <1>;
                spi-max-frequency = <16000000>;
                // Mode 0 (CPOL = 0, CPHA = 0)
            };
        };
    };
};
